# **Orbis-Diplom**

**Orbis-Diplom** — это дипломный проект, реализующий **клиент-серверное приложение для группового общения в реальном времени**.
Система сочетает в себе функционал **чат-платформы**, **сервера с ролями и правами**, **уведомлений**, **планирования**, и **социальных взаимодействий** (друзья, статусы, активность).

---

## Основная идея

Создать масштабируемую платформу, аналогичную Discord или Slack, с возможностью:

* общения в текстовых каналах;
* управления серверами, ролями и правами доступа;
* обмена сообщениями и файлами в реальном времени;
* получения уведомлений и статусов присутствия пользователей;
* интеграции с другими системами (например, модуль планирования и задач).

---

## Технологический стек

### **Backend**

* **Node.js** + **TypeScript**
* **Express.js** — REST API
* **Socket.IO** — коммуникация в реальном времени
* **Redis** — хранение сессий, онлайнов, кеширование
* **PostgreSQL** + **Prisma ORM**
* **HTTPS** (самоподписанные сертификаты для локальной разработки)

### **Frontend**

## Архитектура проекта
Архитектура фронтенда

Фронтенд Orbis-Diplom построен по принципам Feature-Sliced Design (FSD) и реализован на базе React + TypeScript с использованием Redux Toolkit, RTK Query и TailwindCSS.

```
src/
├── app/                # Корневое приложение, конфигурация и инициализация
│   ├── store/          # Redux store, middleware, reducers
│   ├── providers/      # Contexts, themes, routers
│   └── hooks.ts        # Глобальные хуки
│
├── features/           # Бизнес-функции, сгруппированные по доменам
│   ├── auth/           # Авторизация и регистрация
│   ├── chat/           # Компоненты и логика чатов
│   ├── friends/        # Система друзей и запросов
│   ├── issue/          # Работа с задачами/тикетами
│   ├── messages/       # Отправка и получение сообщений
│   ├── moderation/     # Инструменты модерации и администрирования
│   ├── notification/   # Система уведомлений и статусов онлайн
│   ├── server/         # Управление серверами, ролями и правами
│   ├── settings/       # Пользовательские настройки
│   ├── upload/         # Загрузка и обработка файлов
│   └── user/           # Профиль пользователя и взаимодействие
│
├── page/               # Страницы маршрутов (роутинг)
│   ├── Home/
│   ├── Server/
│   └── Chat/
│
├── shared/             # Переиспользуемые UI-компоненты и утилиты
│   ├── ui/             # Базовые компоненты (Button, Input, Modal, и т.д.)
│   ├── layout/         # Общие макеты (ModalLayout, PageLayout, и т.п.)
│   └── icons/          # SVG иконки
│
├── utils/              # Хелперы, форматтеры, кастомные хуки
│
├── ssl/                # Сертификаты для HTTPS при локальной разработке
│
├── App.tsx             # Точка входа приложения
├── main.tsx            # Инициализация ReactDOM
├── routes.tsx          # Конфигурация маршрутов
├── config.ts           # Конфигурация клиента (API, сокеты, ENV)
├── index.css           # TailwindCSS стили
└── .env / .env.example # Переменные окружения клиента
```

---

## Основные модули Socket.IO

| Namespace       | Назначение                                                   |
| --------------- | ------------------------------------------------------------ |
| `/chat`         | управление комнатами, отправка сообщений, “typing”-индикация |
| `/notification` | система уведомлений и присутствия                            |
| `/journal`      | обновления состояния серверов и статусов пользователей       |

---

## Основные функции Backend

* JWT-аутентификация и авторизация по ролям
* Система друзей и статусов “онлайн / оффлайн”
* Общение в чатах в реальном времени
* Сервера, роли и права доступа
* Уведомления (сокет-подписка + REST API)
* Планирование (проект-менеджмент)
* Redis-кеш

---

## Особенности реализации

* Модульная архитектура (`/modules`, `/socket`, `/config`)
* Централизованный `registry` для управления всеми сокет-namespace’ами
* Типизированные события Socket.IO (`emitTo`, `emitToUser`)
* Middleware для авторизации всех сокетов
* Поддержка **graceful shutdown** и health-проверки
* Подготовлено к деплою (Docker / HTTPS / ENV)

---

## Запуск проекта dev

```bash
cd apps/backend
npm install
npm run dev
```

Создай все `.env` см. на `.env.example`

---

## Автор проекта

**Orbis-Diplom** — дипломная работа, выполненная в рамках исследовательского проекта по разработке систем реального времени.
Автор: *FiaLDI*

---

Сборка: backend + frontend + cdn + nginx + postgres + redis.

1. Подготовка окружения

Убедись, что установлены:

docker --version
docker compose version


и ты работаешь в WSL 2 в каталоге проекта:

~/Orbis-Diplom


2. Проверь структуру проекта

Обязательно наличие файлов и директорий:
```
Orbis-Diplom/
├─ apps/
│  ├─ backend/
│  │   ├─ Dockerfile
│  │   ├─ .env.prod
│  ├─ frontend/
│  │   ├─ Dockerfile
│  │   ├─ .env.prod
│  ├─ cdn/
│      ├─ Dockerfile
│      ├─ .env.prod
├─ nginx/
│  └─ nginx.conf
├─ ssl/
│  ├─ selfsigned.pem
│  └─ selfsigned_key.pem
├─ docker-compose.yml
└─ .env.prod
```
3. Собрать и запустить контейнеры

Из корня проекта:

docker compose --env-file .env.prod up --build -d

4. Проверить, что всё поднялось

docker ps

Ожидаемые контейнеры:

orbis_nginx
orbis_frontend
orbis_backend
orbis_cdn
orbis_db_container
orbis_redis_container

5. Проверить логи при необходимости
docker logs orbis_backend --tail 20
docker logs orbis_nginx --tail 20

6. Открыть проект в браузере
https://localhost


если ты переопределял порты (например, 8443):
https://localhost:8443

7. Остановка / очистка
docker compose down